{% extends "base/base.html" %}
{% block title %}
Green Life - Inventario
{% endblock title %}
{% block content %}
<div class="containerinventario">
    <section class="nav__sidebar">
        <nav class="nav__sidebar">
            <ul class="sidebar">
                <li class="sidebar__item"><a href="{% url 'home:graphics' %}" class="item__sidebar monitoreo">Monitoreo de suelo</a></li>
                <li class="sidebar__item"><a href="{% url 'home:graphicsagua' %}" class="item__sidebar monitoreo">Monitoreo de agua</a></li>
                <li class="sidebar__item"><a href="{% url 'home:prediccion' %}" class="item__sidebar monitoreo">Predicción</a></li>
                <li class="sidebar__item"><a href="" class="item__sidebar monitoreo active">Inventario</a></li>
            </ul>
        </nav>
    </section>
    <ul class="seccion">
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-equipo"><i class="fas fa-tools"></i> Equipos</button></li>
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-insumo"><i class="fas fa-flask"></i> Insumos</button></li>
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-proveedor"><i class="fas fa-truck"></i> Proveedores</button></li>
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-plaga"><i class="fas fa-bug"></i> Plagas</button></li>
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-enfermedad"><i class="fas fa-virus"></i> Enfermedades</button></li>
        <li class="seccion__item"><button class="item__seccion" data-target="seccion-tratamiento"><i class="fas fa-syringe"></i> Tratamientos</button></li>
    </ul>


    <main class="maininventario">
        <div>
            <div id="seccion-equipo" class="equipo">
                <div class="registro__titulo">
                    <h3>Registrar Equipo</h3>
                    <a href="{% url 'home:listar_equipos' %}" class="btn btn-info mb-3">Ver Equipos</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ equipo_form.as_p }}
                        <button type="submit" name="registrar_equipo" class="btn btn-primary">Registrar Equipo</button>
                    </form>
                </div>
                
                
                <div class="">
                    <h3>Equipos</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Fecha de Adquisición</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for equipo in equipos %}
                            <tr>
                                <td>{{ equipo.nombre }}</td>
                                <td>{{ equipo.tipo }}</td>
                                <td>{{ equipo.fecha_adquisicion }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="seccion-insumo" class="insumos">
                <div class="registro__titulo">
                    <h3>Registrar Insumo</h3>
                    <a href="{% url 'home:listar_insumos' %}" class="btn btn-info mb-3">Ver Insumos</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ insumo_form.as_p }}
                        <button type="submit" name="registrar_insumo" class="btn btn-primary">Registrar Insumo</button>
                    </form>
                </div>


                <!-- Tabla de Insumos -->
                <div class="mt-4">
                    <h3>Insumos</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Fecha de Insumo</th>
                                <th>Unidad de Medida</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for insumo in insumos %}
                            <tr>
                                <td>{{ insumo.nombre }}</td>
                                <td>{{ insumo.tipo }}</td>
                                <td>{{ insumo.fecha_insumo }}</td>
                                <td>{{ insumo.unidad_medida }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="seccion-proveedor" class="proveedor">
                <div class="registro__titulo">
                    <h3>Registrar Proveedor</h3>
                    <a href="{% url 'home:listar_proveedores' %}" class="btn btn-info mb-3">Ver Proveedores</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ proveedor_form.as_p }}
                        <button type="submit" name="registrar_proveedor" class="btn btn-primary">Registrar Proveedor</button>
                    </form>
                </div>



                <!-- Tabla de Proveedores -->
                <div class="mt-4">
                    <h3>Proveedores</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Contacto</th>
                                <th>Teléfono</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for proveedor in proveedores %}
                            <tr>
                                <td>{{ proveedor.nombre }}</td>
                                <td>{{ proveedor.contacto }}</td>
                                <td>{{ proveedor.telefono }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        
            <div id="seccion-plaga" class="plaga">
                <div class="registro__titulo">
                    <h3>Registrar Plaga</h3>
                    <a href="{% url 'home:listar_plagas' %}" class="btn btn-info mb-3">Ver Plagas</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ plaga_form.as_p }}
                        <button type="submit" name="registrar_plaga" class="btn btn-primary">Registrar Plaga</button>
                    </form>
                </div>
                

                <!-- Tabla de Plagas -->
                <div class="mt-4">
                    <h3>Plagas</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for plaga in plagas %}
                            <tr>
                                <td>{{ plaga.nombre }}</td>
                                <td>{{ plaga.descripcion }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="seccion-enfermedad" class="enfermedad">
                <div class="registro__titulo">
                    <h3>Registrar Enfermedad</h3>
                    <a href="{% url 'home:listar_enfermedades' %}" class="btn btn-info mb-3">Ver Enfermedades</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ enfermedad_form.as_p }}
                        <button type="submit" name="registrar_enfermedad" class="btn btn-primary">Registrar Enfermedad</button>
                    </form>
                </div>


                <!-- Tabla de Enfermedades -->
                <div class="mt-4">
                    <h3>Enfermedades</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for enfermedad in enfermedades %}
                            <tr>
                                <td>{{ enfermedad.nombre }}</td>
                                <td>{{ enfermedad.descripcion }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="seccion-tratamiento" class="tratamiento">
                <div class="registro__titulo">
                    <h3>Registrar Tratamiento</h3>
                    <a href="{% url 'home:listar_tratamientos' %}" class="btn btn-info mb-3">Ver Tratamientos</a>
                    <form method="post" class="form__inventario">
                        {% csrf_token %}
                        {{ tratamiento_form.as_p }}
                        <button type="submit" name="registrar_tratamiento" class="btn btn-primary">Registrar Tratamiento</button>
                    </form>
                </div>


                    <!-- Tabla de Tratamientos -->
                <div class="mt-4">
                    <h3>Tratamientos</h3>
                    <table class="tabla-muestra tabla-crud">
                        <thead>
                            <tr>
                                <th>Siembra</th>
                                <th>Tipo</th>
                                <th>Fecha</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for tratamiento in tratamientos %}
                            <tr>
                                <td>{{ tratamiento.siembra }}</td>
                                <td>{{ tratamiento.tipo }}</td>
                                <td>{{ tratamiento.fecha_tratamiento }}</td>
                                <td>{{ tratamiento.descripcion }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const botones = document.querySelectorAll(".item__seccion[data-target]");
    const secciones = document.querySelectorAll(".equipo, .insumos, .proveedor, .plaga, .enfermedad, .tratamiento");

    // Oculta todas las secciones al inicio excepto la primera
    secciones.forEach((sec, i) => {
        sec.style.display = i === 0 ? "flex" : "none";
        sec.style.flexDirection = "row"; // Asegura layout horizontal
        sec.style.gap = "2rem"; // Espacio entre formulario y tabla
    });

    botones.forEach(boton => {
        boton.addEventListener("click", function () {
            const targetId = this.getAttribute("data-target");

            secciones.forEach(seccion => {
                if (seccion.id === targetId) {
                    seccion.style.display = "flex";
                    seccion.style.flexDirection = "row";
                } else {
                    seccion.style.display = "none";
                }
            });
        });
    });
});


    document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll(".item__seccion");

        buttons.forEach(btn => {
            btn.addEventListener("click", function () {
                // Remueve la clase activa de todos los botones
                buttons.forEach(b => b.classList.remove("active"));
                // Agrega la clase activa al botón clicado
                this.classList.add("active");
            });
        });
    });
    </script>
    
{% endblock content %}